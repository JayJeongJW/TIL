📆 2025-05-11 TIL: 장애물 반복 생성 구조 개선 및 스테이지 설계 방향

---

### 📝 팀 프로젝트 준비 과정

- object pooling → instantiate & destroy 방식으로 전환  
- 반복 생성 구조는 `ObstacleSpawner`에서 `InvokeRepeating()`으로 일정 간격 생성  
- 왼쪽 화면 밖으로 벗어나면 `Destroy()`로 제거  
- 장애물은 **12개 개별 프리팹**으로 분리하여 관리  
- `spawnPositions` 배열도 12개로 맞춰 1:1 연결  
- `StageManager`가 시간에 따라 스테이지 전환  
- 각 스테이지는 **타일맵 + 배경 + 스폰포인트 + 장애물 세트**로 구성  
- 스테이지마다 **난이도와 배치가 다르게 루프 구조로 구현 예정**

---

### ❗ 문제점

- 풀링 구조에서 **오브젝트가 재사용되지 않고 계속 생성되어 하이라키가 복잡해짐**
- **스폰포인트 재사용으로 장애물이 겹쳐서 생성되는 문제** 발생
- 스폰포인트로 사용한 `Transform`들이 `Destroy()`되어 **Missing 에러** 발생

---

### 💡 시도해본 것

- 최종적으로 **풀링 구조 포기 → Destroy 방식으로 단순화**
- 장애물 스폰 전용 **컨테이너 오브젝트 생성**하여 하이라키 정리
- 배경 / 타일맵 / 장애물 구조를 분리하여 정리함

---

### 🧠 알게 된 것

- 현재 구조에서는 **단순한 방식이 유지보수에 더 유리**하고 직관적임
- **스폰포인트는 삭제하면 안 됨**, 장애물만 삭제 대상이어야 함
- **하위 오브젝트로 있는 프리팹은 인스펙터에 직접 연결 불가**  
  → 개별 프리팹으로 만들어서 연결해야 안정적으로 작동함
